<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¥ç§˜æ˜Ÿæ˜ŸåŠ›é‡â­65æŠ˜èµ· | Cimiäº¤å‹è«–å£‡</title>
    <link rel="icon" href="assets/images/logo.ico" type="image/x-icon">
    <link rel="stylesheet" href="assets/css/product_ad_page.css">
    <script src="js/vue.js"></script>

</head>

<body>
    @@include('layout/header.html')
    <div id="productApp">
        <div class="content_area">
            @@include('layout/sidebar.html')
            <!-- å¥½ç‰©å•†åŸæœ€ä¸Šé¢çš„è§¸éŠ·å»£å‘Šè£¡çš„å…§é æ–‡ç«  -->
            <main class="main_product_ad_page">
                <!-- æ–‡ç«  -->
                <section class="product_ad_txt">
                    <div class="txt_box">
                        <h1>ç¥ç§˜æ˜Ÿæ˜ŸåŠ›é‡â­65æŠ˜èµ·</h1>
                        <h2>æ•´é«”é‹å‹¢ğŸ†™æ»¿ 490 æŠ˜ 50</h2>
                        <p>æŠ¬é ­æœ›è‘—æ•¸ä¸æ¸…çš„æ˜Ÿæ˜Ÿâœ¨ï¼Œ
                            åŒ–æˆä¸€å€‹å€‹ç¥ç¥•ğŸ”®çš„æ˜Ÿåº§ï¼Œ
                            ä»–å€‘...æƒ³å‘Šè¨´ä½ ä»€éº¼å‘¢ğŸ¤”
                            å°±ç”¨å¥½ç‰©ä¾†æå‡æ•´é«”é‹å‹¢ï¼Œå¾â­å‡ºç™¼å§ï¼

                            ç”¨æ¸¬é©—æ‰¾å‡ºå°ˆå±¬æ–¼å¦³çš„æ¨è–¦å¥½ç‰©ï¼
                            ğŸ’«2/23-3/2 é€£å‡æ˜Ÿåº§é‹å‹¢ğŸ’«
                            æ´»å‹•è©³æƒ… CIMI æœå°‹ğŸ” é€£å‡æ˜Ÿåº§é‹å‹¢æ¸¬é©—
                        </p>
                    </div>
                    <!-- </div> -->
                </section>
                <!-- å•†å“ -->
                <section class="all">
                    <div class="all_item_box">
                        <!-- æ¨™é¡Œ -->
                        <div class="title">
                            <p>å•†å“</p>
                        </div>
                        <!-- å•†å“ -->
                        <div class="item_box">
                            <div onclick="myFunction()" class="item ligh_box_jump" v-for="(good, index) in ad_goods"
                                :key="index" @click="getGoodNumber(good.goods_no)">
                                <div class="img_box">
                                    <img v-bind:src="good.goods_pic1">
                                </div>
                                <div class="txt_box">
                                    <p>{{good.goods_name}}</p>
                                    <p>NT.{{good.goods_price}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- ç‡ˆç®±--æ„Ÿè¬æ–‡é€²å¤§å¤§ç›¸åŠ©!!!!! -->
        <section class="product_lighbox">
            <main class="product_page" v-for="good in ad_goods" v-if="number==good.goods_no">
                <!-- å•†å“æœ€ä¸Šé¢çš„æ¨™é¡Œ -->
                <section class="product_page_title">
                    <!-- å•†å“åç¨± -->
                    <div class="txt_box">
                        <p>{{good.goods_name}}</p>
                    </div>
                    <!-- å‰å‰æŒ‰éˆ• -->
                    <div class="img_box cross" @click="displayNone">
                        <img src="assets\images\icon\close.png">
                    </div>

                </section>
                <!-- è¿½è¹¤åˆ†é¡ -->
                <section class="product_page_sort_follow">
                    <div class="product_item_box">
                        <!-- åœ–ç‰‡ -->
                        <div class="product_img_box">
                            <img src="assets\images\icon\shop_food.png">
                        </div>
                        <!-- æ–‡å­— -->
                        <div class="txt_box">
                            <!-- åˆ†é¡ -->
                            <p style="color:rgb(20, 20, 20);">{{good.goods_class}}</p>
                        </div>
                    </div>
                    <!-- æŒ‰éˆ• -->
                    <button class="btn-secondary">è¿½è¹¤</button>
                </section>

                <!-- // å•†å“ç…§(å°åœ–è®Šå¤§åœ– -->
                <section class="product_page_pic">
                    <div class="product_large">
                        <!-- æ‰¾å¤§åœ–åœ–ç‰‡1 -->
                        <img id="large" :src="good.goods_pic1">
                    </div>
                    <div class="product_small">
                        <!-- æ‰¾åœ–ç‰‡1 -->
                        <div class="img_box">
                            <img :src="good.goods_pic1" @click="showLarge" />
                        </div>
                        <!-- æ‰¾åœ–ç‰‡2 -->
                        <div class="img_box">
                            <img :src="good.goods_pic2" @click="showLarge" />
                        </div>
                        <!-- æ‰¾åœ–ç‰‡3 -->
                        <div class="img_box">
                            <img :src="good.goods_pic3" @click="showLarge" />
                        </div>
                    </div>
                </section>

                <!-- å•†å“åƒ¹æ ¼/è³‡è¨Š -->
                <section class="product_page_price_in">
                    <!-- æ–‡å­—å€ -->
                    <div class="txt_box">
                        <!-- åƒ¹æ ¼ -->
                        <div class="txt_box_pri">
                            <!-- $åƒ¹æ ¼æ²’åˆ¥çš„ -->
                            <p>NT.{{good.goods_price}}</p>
                        </div>
                        <!-- æ„›å¿ƒ -->
                        <div class="like_box">
                            <div class="img_box">
                                <img src="assets\images\icon\like.png">
                            </div>
                            <!-- æ„›å¿ƒæ•¸ -->
                            <div class="num_box">
                                <span class="num product_num">
                                    {{good.goods_like}}
                                </span>
                            </div>
                        </div>
                    </div>
                    <!-- å•†å“è³‡è¨Š -->
                    <div class="txt_box_in">
                        <p>
                            {{good.goods_i}}
                        </p>
                    </div>
                </section>

                <!-- ç•™è¨€å€ -->
                <section class="product_comment">
                    <p>å…±5å‰‡ç•™è¨€</p>
                    <!-- å–®å‰‡ç•™è¨€ -->
                    <div class="comment_box">
                        <div class="comment_head_photo">
                            <img src="https://fakeimg.pl/40x40/200">
                        </div>
                        <div class="comment_txt">
                            <div class="comment_mem_name_box">
                                <span class="comment_mem_name_item">ä¹™éª¨å„ªå¤ª</span>
                                <div class="comment_impeach_icon">
                                    <img src="assets/images/icon/more_hov.png" alt="">
                                </div>
                            </div>
                            <div class="comment_content">
                                é€™ç¨®å¾ˆè„†å¾ˆå¥½åƒæ¬¸ğŸ¤©
                            </div>
                            <div class="comment_info">
                                <div class="comment_like_box">
                                    <div class="comment_like_icon">
                                        <img src="assets/images/icon/like_hov.png" alt="">
                                    </div>
                                    <span class="comment_like_amount">23</span>
                                </div>
                                <span class="comment_date">2022/2/23</span>
                            </div>
                        </div>
                    </div>
                    <!-- å–®å‰‡ç•™è¨€ -->
                    <div class="comment_box">
                        <div class="comment_head_photo">
                            <img src="https://fakeimg.pl/40x40/200">
                        </div>
                        <div class="comment_txt">
                            <div class="comment_mem_name_box">
                                <span class="comment_mem_name_item">é‡Œé¦™è¶…é¦™</span>
                                <div class="comment_impeach_icon">
                                    <img src="assets/images/icon/more_hov.png" alt="">
                                </div>
                            </div>
                            <div class="comment_content">
                                é€™å€‹è¶…ç´šå¥½åƒ ä¹‹å‰æœ‰åƒéï¼ è¶…ç´šé¦™ç„¶å¾Œæœ‰å¾®å¾®çš„ç”œ
                            </div>
                            <div class="comment_info">
                                <div class="comment_like_box">
                                    <div class="comment_like_icon">
                                        <img src="assets/images/icon/like_hov.png" alt="">
                                    </div>
                                    <span class="comment_like_amount">23</span>
                                </div>
                                <span class="comment_date">2022/2/23</span>
                            </div>
                        </div>
                    </div>
                    <!-- å–®å‰‡ç•™è¨€ -->
                    <div class="comment_box">
                        <div class="comment_head_photo">
                            <img src="https://fakeimg.pl/40x40/200">
                        </div>
                        <div class="comment_txt">
                            <div class="comment_mem_name_box">
                                <span class="comment_mem_name_item">äº”æ¢æ‚Ÿ</span>
                                <div class="comment_impeach_icon">
                                    <img src="assets/images/icon/more_hov.png" alt="">
                                </div>
                            </div>
                            <div class="comment_content">
                                ä¹Ÿå¤ªä¾¿å®œäº†å§ï¼
                            </div>
                            <div class="comment_info">
                                <div class="comment_like_box">
                                    <div class="comment_like_icon">
                                        <img src="assets/images/icon/like_hov.png" alt="">
                                    </div>
                                    <span class="comment_like_amount">23</span>
                                </div>
                                <span class="comment_date">2022/2/23</span>
                            </div>
                        </div>
                    </div>
                    <!-- å–®å‰‡ç•™è¨€ -->
                    <div class="comment_box">
                        <div class="comment_head_photo">
                            <img src="https://fakeimg.pl/40x40/200">
                        </div>
                        <div class="comment_txt">
                            <div class="comment_mem_name_box">
                                <span class="comment_mem_name_item">ç´”æ„›æˆ°ç¥</span>
                                <div class="comment_impeach_icon">
                                    <img src="assets/images/icon/more_hov.png" alt="">
                                </div>
                            </div>
                            <div class="comment_content">
                                å¡ä¸€å€‹!!!!
                            </div>
                            <div class="comment_info">
                                <div class="comment_like_box">
                                    <div class="comment_like_icon">
                                        <img src="assets/images/icon/like_hov.png" alt="">
                                    </div>
                                    <span class="comment_like_amount">23</span>
                                </div>
                                <span class="comment_date">2022/2/23</span>
                            </div>
                        </div>
                    </div>
                    <!-- å–®å‰‡ç•™è¨€ -->
                    <div class="comment_box">
                        <div class="comment_head_photo">
                            <img src="https://fakeimg.pl/40x40/200">
                        </div>
                        <div class="comment_txt">
                            <div class="comment_mem_name_box">
                                <span class="comment_mem_name_item">å’’è¡“è¿´æˆ°</span>
                                <div class="comment_impeach_icon">
                                    <img src="assets/images/icon/more_hov.png" alt="">
                                </div>
                            </div>
                            <div class="comment_content">
                                å¡ä¸€å€‹!!!
                            </div>
                            <div class="comment_info">
                                <div class="comment_like_box">
                                    <div class="comment_like_icon">
                                        <img src="assets/images/icon/like_hov.png" alt="">
                                    </div>
                                    <span class="comment_like_amount">23</span>
                                </div>
                                <span class="comment_date">2022/2/23</span>
                            </div>
                        </div>
                    </div>

                </section>

                <!-- æˆ‘çš„ç•™è¨€è¼¸å…¥å€ -->
                <section class="product_page_msg">
                    <!-- å³é‚Š -->
                    <div class="item_box_msger">
                        <!-- ç•™è¨€é ­è²¼ -->
                        <div class="img_box">
                            <img src="assets\images\icon\nav_member.png">
                        </div>
                        <!-- ç•™è¨€ -->

                        <div class="txt_box">
                            <input type="text" name="tname" placeholder="ç•™è¨€...">
                        </div>
                    </div>
                    <!-- å·¦é‚Šicon -->
                    <div class="item_box_fuction_icon">
                        <div class="img_box">
                            <!-- æ”¶è— -->
                            <div class="img_box_save product_save" title="åŠ å…¥æ”¶è—">
                                <img src="assets/images/icon/save_hov.png">
                            </div>

                            <!-- æ„›å¿ƒ -->
                            <div class="img_box_report product_heart" title="åŠ å…¥æ„›å¿ƒ" @click="initheart(good.goods_no)">
                                <img src="assets\images\icon\like_hov.png">
                            </div>
                        </div>
                        <!-- ç«‹å³è³¼è²· -->
                        <button class="btn-primary">ç«‹å³è³¼è²·</button>

                        <!-- åŠ å…¥è³¼ç‰©è»Š-->
                        <button class="btn-secondary">åŠ å…¥è³¼ç‰©è»Š</button>
                    </div>
                </section>
            </main>
        </section>

    </div>

    <!-- å»£å‘Šè¼ªæ’­/ç‡ˆç®±/æ”¶è—save/æ„›å¿ƒheart/jsé™æ™‚ç‰¹è³£(å€’æ•¸è¨ˆæ™‚)/å°åœ–è®Šå¤§åœ– -->
    <script src="js\product_all.js"></script>
    <!-- æ’ˆè³‡æ–™ -->
    <!-- <script src="js\product.js"></script> -->

    <!-- vue product_ad_all -->
    <script>
        new Vue({
            el: "#productApp",
            data: {
                ad_goods: [],
                number: 0,
            },
            methods: {
                //å‰å‰åŠŸèƒ½
                displayNone() {
                    let x = document.querySelector(".product_lighbox");
                    x.style.display = "none";
                },
                //ç‡ˆç®±å‡ºç¾çš„è·Ÿåœ–ç‰‡é¡¯ç¤ºè¦æ¨£
                getGoodNumber(goods_no) {
                    // console.log(this.number);
                    this.number = goods_no;
                    // console.log(this.number);

                },
                getProductAd() {
                    let xhr = new XMLHttpRequest();
                    //æ‰“é–‹phpçš„æˆ‘çš„phpæª”
                    xhr.open("get", `phps/product_ad_page.php`, true);
                    xhr.send(null);

                    xhr.onload = () => {
                        // æ¥æ”¶PHPå‚³ä¾†çš„è³‡æ–™
                        allgoods = JSON.parse(xhr.responseText);
                        // console.log(xhr.responseText);
                        // console.table(allgoods);

                        this.ad_goods = allgoods
                    }
                },
                //å°åœ–è®Šå¤§åœ–åŠŸèƒ½
                showLarge(e) {
                    let small = e.target;
                    //å¤§åœ–è·¯å¾‘è®Šå°åœ–
                    document.querySelector(".large").src = small.src;
                },
                //åŠ å…¥æ„›å¿ƒ
                initheart(goods_no) {
                    // console.log("ssss")
                    let product_heart = document.querySelector(".product_heart")
                    let product_num = document.querySelector(".product_num")
                    let product_heart_img = document.querySelector(".product_heart img")

                    if (product_heart.title == "åŠ å…¥æ„›å¿ƒ") {
                        product_heart_img.src =
                            "assets/images/icon/like.png";
                        product_heart.title = "å–æ¶ˆæ„›å¿ƒ";
                        product_num.innerHTML++;

                        let xhr = new XMLHttpRequest();
                        //å•è™Ÿä¹‹å¾Œå‚³phpè³‡æ–™ï¼Œå› ç‚ºæˆ‘å€‘çš„æœƒå“¡è³‡æ–™å¯«åœ¨local storage,éœ€è¦çš„æœƒå“¡è³‡æ–™ï¼Œåœ¨å•è™Ÿå¾Œé¢å¯«å…¥ï¼Œå•†å“ç›®å‰ä¸éœ€è¦
                        xhr.open("get", `phps/product_heart_num_add.php?goods_no=${goods_no}`, true);
                        xhr.send(null);

                        xhr.onload = function () {
                            // æ¥æ”¶PHPå‚³ä¾†çš„è³‡æ–™
                            // allgoods = JSON.parse(xhr.responseText);
                            // console.log(xhr.responseText);
                            // console.table(allgoods);
                        }

                    } else {
                        product_heart_img.src =
                            "assets/images/icon/like_hov.png";
                        product_heart.title = "åŠ å…¥æ„›å¿ƒ";
                        product_num.innerHTML--;

                        let xhr = new XMLHttpRequest();
                        xhr.open("get", `phps/product_heart_num_delete.php?goods_no=${goods_no}`, true);
                        xhr.send(null);

                        xhr.onload = function () {
                            // æ¥æ”¶PHPå‚³ä¾†çš„è³‡æ–™
                            // allgoods = JSON.parse(xhr.responseText);
                            // console.log(xhr.responseText);
                            // console.table(allgoods);
                        }
                    }

                }


            },
            mounted() {
                this.getProductAd()
            },
            //ç­†è¨˜!!å› ç‚ºæ„›å¿ƒç¬¬ä¸€æ¬¡æ²’å‡ºç¾åœ¨ç¶²é ä¸Šæ‰€ä»¥å¯«åœ¨mountedæœƒæŠ“ä¸åˆ°ã€‚
            // ç”¨Vueæ”¹è®Šç¶²é ï¼Œå¦‚:v-if
            updated() {

                //----------------------åŠ å…¥æ”¶è— æˆ– å–æ¶ˆæ”¶è—-------------- 
                let product_save = document.querySelector("product_save");

                function switchFavorite() {
                    if (product_save.title == "åŠ å…¥æ”¶è—") {
                        product_save_img.src =
                            "assets/images/icon/save.png";
                        product_save.title = "å–æ¶ˆæ”¶è—";
                    } else {
                        product_save_img.src =
                            "assets/images/icon/save_hov.png";
                        product_save.title = "åŠ å…¥æ”¶è—";
                    }
                }
                //functionå·¥å…·åœ¨é€™é€™é‚Š
                function initsave() {
                    //è¨­å®š[åŠ å…¥æ”¶è— æˆ– å–æ¶ˆæ”¶è—]çš„é»æŒ‰äº‹ä»¶
                    product_save = document.querySelector(".product_save")
                    // è®Šæ•¸åç¨±
                    product_save_img = document.querySelector(".product_save img")
                    product_save.onclick = switchFavorite;
                } //initsave

                //ä»£è¡¨ä½¿ç”¨é€™å€‹å·¥å…·
                initsave()

            },

        })
    </script>


</body>

</html>