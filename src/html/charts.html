<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>創作者排行榜 | CiMi交友論壇</title>
    <link rel="stylesheet" href="assets/css/charts.css">
    <link rel="stylesheet" href="assets/css/tabs.css">
</head>

<body>
    @@include('layout/header.html')

    <div class="content_area">
        @@include('layout/sidebar.html')
        <main class="main_area">
            <h2>創作者排行榜</h2>
            <div id="tabs" class="container">
                <div class="tabs">
                    <a @click="activetab='1'" :class="[ activetab === '1' ? 'active' : '' ]">發文</a>
                    <a @click="activetab='2'" :class="[ activetab === '2' ? 'active' : '' ]">喜歡</a>
                    <a @click="activetab='3'" :class="[ activetab === '3' ? 'active' : '' ]">收藏</a>
                    <a @click="activetab='4'" :class="[ activetab === '4' ? 'active' : '' ]">追蹤</a>
                </div>

                <div class="content">
                    <div v-if="activetab ==='1'" class="tabcontent">
                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.1</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=12">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">抹抹健康</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                發文數 : <span>343</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>

                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.2</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=13">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">好人平安</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                發文數 : <span>328</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>

                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.3</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=14">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">陶氣小毛</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                發文數 : <span>293</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>

                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.4</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=16">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">吹泡泡</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                發文數 : <span>288</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>

                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.5</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=17">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">炸彈超人</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                發文數 : <span>259</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>
                    </div>
                    <div v-if="activetab ==='2'" class="tabcontent">
                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.1</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=18">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">抹茶蘋果</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                喜歡數 : <span>834</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>

                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.2</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=19">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">三生平安</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                喜歡數 : <span>756</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>

                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.3</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=20">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">小氣阿花</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                喜歡數 : <span>666</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>

                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.4</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=21">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">如如天才</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                喜歡數 : <span>463</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>

                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.5</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=22">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">文進樹神</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                喜歡數 : <span>349</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>
                    </div>
                    <div v-if="activetab ==='3'" class="tabcontent">
                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.1</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=23">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">抹茶草莓</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                收藏數 : <span>777</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>

                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.2</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=24">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">黃黃顆顆</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                收藏數 : <span>690</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>

                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.3</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=25">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">媛氣滿滿</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                收藏數 : <span>675</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>

                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.4</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=26">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">雯武雙全</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                收藏數 : <span>533</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>
                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.5</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=27">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">源清流靖</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                收藏數 : <span>675</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>
                    </div>
                    <div v-if="activetab ==='4'" class="tabcontent">
                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.1</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=28">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">草莓巧克</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                追蹤數 : <span>870</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>

                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.2</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=29">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">平安喜樂</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                追蹤數 : <span>798</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>

                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.3</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=30">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">煞氣小花</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                追蹤數 : <span>639</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>
                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.4</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=31">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">橫掃千均</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                追蹤數 : <span>584</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>
                        <div class="charts_box">
                            <div class="charts_rank">
                                <span>No.5</span>
                            </div>
                            <div class="charts_img">
                                <img src="https://picsum.photos/100/100/?random=32">
                            </div>
                            <div class="charts_name">
                                <span class="charts_mem">萬事如意</span>
                                <span class="charts_account">@mumumu</span>
                            </div>
                            <div class="charts_sum">
                                追蹤數 : <span>404</span>
                            </div>
                            <div class="charts_btn">
                                <button type="button" class="btn-secondary">追蹤</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="js/vue.js"></script>
    <!-- 分類頁籤 -->
    <script>
        new Vue({
            el: '#tabs',
            data: {
                activetab: '1'
            },
            methods: {
                getData() {

                }
            },
            mounted() {
                // this.getData();
                let charts_mem = document.querySelectorAll('.charts_mem'); //會員名稱
                let charts_icon = document.querySelectorAll('.charts_img img'); //會員頭像
                let charts_account = document.querySelectorAll('.charts_account'); //會員帳號
                let charts_sum = document.querySelectorAll('.charts_sum span'); //排行計算

                // console.log(charts_icon)

                // GET
                let xhr = new XMLHttpRequest();
                xhr.open("get", `phps/getcharts.php?case=${this.activetab}`, true);
                xhr.send(null);

                xhr.onload = function () {
                    // 接收PHP傳來的資料
                    charts_info = JSON.parse(xhr.responseText);
                    // charts_account[0].innerText = charts_info[0];
                    for (let i = 0; i < charts_account.length; i++) {
                        // console.log(charts_info[i].mem_name);
                        charts_mem[i].innerText = charts_info[i].mem_name;
                        charts_account[i].innerText = "@" + charts_info[i].mem_id;
                        charts_icon[i].src = charts_info[i].mem_head;
                        charts_sum[i].innerText = charts_info[i].mem_post;
                    }
                }
            },
            updated() {
                // this.getData();
                let charts_mem = document.querySelectorAll('.charts_mem'); //會員名稱
                let charts_icon = document.querySelectorAll('.charts_img img'); //會員頭像
                let charts_account = document.querySelectorAll('.charts_account'); //會員帳號
                let charts_sum = document.querySelectorAll('.charts_sum span'); //排行計算

                // console.log(charts_icon)

                // GET
                let xhr = new XMLHttpRequest();
                xhr.open("get", `phps/getcharts.php?case=${this.activetab}`, true);
                xhr.send(null);

                xhr.onload = function () {
                    // 接收PHP傳來的資料
                    charts_info = JSON.parse(xhr.responseText);
                    // charts_account[0].innerText = charts_info[0];
                    for (let i = 0; i < charts_account.length; i++) {
                        // console.log(charts_info[i].mem_name);
                        charts_mem[i].innerText = charts_info[i].mem_name;
                        charts_account[i].innerText = "@" + charts_info[i].mem_id;
                        charts_icon[i].src = charts_info[i].mem_head;
                        charts_sum[i].innerText = charts_info[i].mem_post |= charts_info[i]
                            .article_likes_amount |= charts_info[i].article_collect_amount |= charts_info[i]
                            .writer_no;

                        console.log(charts_info[i])
                    }
                }
            }
        });
    </script>

</body>

</html>